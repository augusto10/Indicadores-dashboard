(()=>{var e={};e.id=236,e.ids=[236],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},48845:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var t=s(50482),r=s(69108),l=s(62563),i=s.n(l),n=s(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(a,d);let o=["",{children:["dashboard",{children:["panel",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2744)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\panel\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,99233)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,78062)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\panel\\page.tsx"],m="/dashboard/panel/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/panel/page",pathname:"/dashboard/panel",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8206:(e,a,s)=>{Promise.resolve().then(s.bind(s,88086)),Promise.resolve().then(s.bind(s,57920))},88086:(e,a,s)=>{"use strict";s.r(a),s.d(a,{DepartmentPanel:()=>F});var t=s(95344),r=s(3729),l=s(41067),i=s(51838),n=s(17910),d=s(46064),o=s(44669);function c({fields:e,onSubmit:a,onCancel:s,initialData:l,isLoading:i}){let[n,d]=(0,r.useState)({name:"",value:"",target:"",unit:"",description:""});(0,r.useEffect)(()=>{l&&d({name:l.name||"",value:l.value?.toString()||"",target:l.target?.toString()||"",unit:l.unit||"",description:l.description||""})},[l]);let o=e=>{d({...n,name:e.label,unit:e.unit})};return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a({...n,value:parseFloat(n.value),target:parseFloat(n.target)})},className:"space-y-4",children:[!l&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione um campo padr\xe3o (opcional)"}),t.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:e.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>o(e),className:"text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded border transition-colors",children:[e.label," (",e.unit,")"]},e.name))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Indicador *"}),t.jsx("input",{type:"text",id:"name",required:!0,value:n.name,onChange:e=>d({...n,name:e.target.value}),className:"input-field",placeholder:"Ex: Vendas do m\xeas"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"value",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Atual *"}),t.jsx("input",{type:"number",id:"value",required:!0,step:"0.01",value:n.value,onChange:e=>d({...n,value:e.target.value}),className:"input-field",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"target",className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta *"}),t.jsx("input",{type:"number",id:"target",required:!0,step:"0.01",value:n.target,onChange:e=>d({...n,target:e.target.value}),className:"input-field",placeholder:"0"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidade"}),t.jsx("input",{type:"text",id:"unit",value:n.unit,onChange:e=>d({...n,unit:e.target.value}),className:"input-field",placeholder:"Ex: R$, %, unidades"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),t.jsx("textarea",{id:"description",rows:3,value:n.description,onChange:e=>d({...n,description:e.target.value}),className:"input-field",placeholder:"Descri\xe7\xe3o opcional do indicador"})]}),n.value&&n.target&&(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Preview:"}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"font-medium",children:n.name}),(0,t.jsxs)("span",{className:"text-sm",children:[n.value," / ",n.target," ",n.unit]})]}),t.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${parseFloat(n.value)>=parseFloat(n.target)?"bg-green-500":parseFloat(n.value)>=.8*parseFloat(n.target)?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(parseFloat(n.value)/parseFloat(n.target)*100,100)}%`}})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:s,className:"btn-secondary",disabled:i,children:"Cancelar"}),t.jsx("button",{type:"submit",className:"btn-primary disabled:opacity-50",disabled:i,children:i?"Salvando...":l?"Atualizar":"Criar"})]})]})}var m=s(27333),u=s(47674),x=s(16212),p=s(91626);let h=r.forwardRef(({className:e,type:a,...s},r)=>t.jsx("input",{type:a,className:(0,p.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));h.displayName="Input";var g=s(62409),j=r.forwardRef((e,a)=>(0,t.jsx)(g.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));j.displayName="Label";let v=(0,s(49247).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=r.forwardRef(({className:e,...a},s)=>t.jsx(j,{ref:s,className:(0,p.cn)(v(),e),...a}));b.displayName=j.displayName;var y=s(61351),f=s(14513);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,s(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function C({onSubmit:e,onCancel:a,initialData:s,isLoading:l}){let[i,n]=(0,r.useState)({faturamentoDia:s?.faturamentoDia||0,faturamentoMesAcumulado:s?.faturamentoMesAcumulado||0,metaFaturamentoDia:s?.metaFaturamentoDia||0,metaFaturamentoMes:s?.metaFaturamentoMes||0,positivacaoDia:s?.positivacaoDia||0,positivacaoMesAcumulado:s?.positivacaoMesAcumulado||0,metaPositivacaoDia:s?.metaPositivacaoDia||0,metaPositivacaoMes:s?.metaPositivacaoMes||0}),d=(e,a)=>{n(s=>({...s,[e]:parseFloat(a)||0}))},o=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return(0,t.jsxs)(y.Zb,{className:"w-full max-w-4xl mx-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Formul\xe1rio - Setor Comercial"}),t.jsx(x.z,{variant:"ghost",size:"sm",onClick:a,children:t.jsx(f.Z,{className:"h-4 w-4"})})]})}),t.jsx(y.aY,{children:(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(i)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600",children:"Faturamento"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"faturamentoDia",children:"Faturamento do Dia (R$)"}),t.jsx(h,{id:"faturamentoDia",type:"number",step:"0.01",value:i.faturamentoDia,onChange:e=>d("faturamentoDia",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"faturamentoMesAcumulado",children:"Faturamento M\xeas Acumulado (R$)"}),t.jsx(h,{id:"faturamentoMesAcumulado",type:"number",step:"0.01",value:i.faturamentoMesAcumulado,onChange:e=>d("faturamentoMesAcumulado",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaFaturamentoDia",children:"Meta Faturamento Dia (R$)"}),t.jsx(h,{id:"metaFaturamentoDia",type:"number",step:"0.01",value:i.metaFaturamentoDia,onChange:e=>d("metaFaturamentoDia",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaFaturamentoMes",children:"Meta Faturamento M\xeas (R$)"}),t.jsx(h,{id:"metaFaturamentoMes",type:"number",step:"0.01",value:i.metaFaturamentoMes,onChange:e=>d("metaFaturamentoMes",e.target.value),placeholder:"0,00"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-600",children:"Positiva\xe7\xe3o"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"positivacaoDia",children:"Positiva\xe7\xe3o do Dia"}),t.jsx(h,{id:"positivacaoDia",type:"number",value:i.positivacaoDia,onChange:e=>d("positivacaoDia",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"positivacaoMesAcumulado",children:"Positiva\xe7\xe3o M\xeas Acumulado"}),t.jsx(h,{id:"positivacaoMesAcumulado",type:"number",value:i.positivacaoMesAcumulado,onChange:e=>d("positivacaoMesAcumulado",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaPositivacaoDia",children:"Meta Positiva\xe7\xe3o Dia"}),t.jsx(h,{id:"metaPositivacaoDia",type:"number",value:i.metaPositivacaoDia,onChange:e=>d("metaPositivacaoDia",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaPositivacaoMes",children:"Meta Positiva\xe7\xe3o M\xeas"}),t.jsx(h,{id:"metaPositivacaoMes",type:"number",value:i.metaPositivacaoMes,onChange:e=>d("metaPositivacaoMes",e.target.value),placeholder:"0"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Preview dos Indicadores:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Faturamento Dia:"}),t.jsx("p",{children:o(i.faturamentoDia)})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Meta Dia:"}),t.jsx("p",{children:o(i.metaFaturamentoDia)})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Positiva\xe7\xe3o Dia:"}),t.jsx("p",{children:i.positivacaoDia})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium",children:"Meta Positiva\xe7\xe3o:"}),t.jsx("p",{children:i.metaPositivacaoDia})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(x.z,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),(0,t.jsxs)(x.z,{type:"submit",disabled:l,children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar Dados"]})]})]})})]})}function w({onSubmit:e,onCancel:a,initialData:s,isLoading:l}){let[i,n]=(0,r.useState)({otifMes:s?.otifMes||0,metaOtif:s?.metaOtif||95,taxaDevolucaoMes:s?.taxaDevolucaoMes||0,metaTaxaDevolucao:s?.metaTaxaDevolucao||5,custoLogisticoMes:s?.custoLogisticoMes||0,metaCustoLogistico:s?.metaCustoLogistico||3.5}),d=(e,a)=>{n(s=>({...s,[e]:parseFloat(a)||0}))},o=(e,a,s=!1)=>{let t=e/a*100;return s?t<=100?"text-green-600":t<=120?"text-yellow-600":"text-red-600":t>=100?"text-green-600":t>=80?"text-yellow-600":"text-red-600"};return(0,t.jsxs)(y.Zb,{className:"w-full max-w-4xl mx-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Formul\xe1rio - Setor Log\xedstica"}),t.jsx(x.z,{variant:"ghost",size:"sm",onClick:a,children:t.jsx(f.Z,{className:"h-4 w-4"})})]})}),t.jsx(y.aY,{children:(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(i)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600",children:"OTIF (On Time In Full)"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"otifMes",children:"OTIF M\xeas % (D-2)"}),t.jsx(h,{id:"otifMes",type:"number",step:"0.01",min:"0",max:"100",value:i.otifMes,onChange:e=>d("otifMes",e.target.value),placeholder:"0,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Dados de 2 dias atr\xe1s"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaOtif",children:"Meta OTIF (%)"}),t.jsx(h,{id:"metaOtif",type:"number",step:"0.01",min:"0",max:"100",value:i.metaOtif,onChange:e=>d("metaOtif",e.target.value),placeholder:"95,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Meta padr\xe3o: 95%"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Taxa de Devolu\xe7\xe3o"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"taxaDevolucaoMes",children:"Taxa Devolu\xe7\xe3o M\xeas % (D-1)"}),t.jsx(h,{id:"taxaDevolucaoMes",type:"number",step:"0.01",min:"0",max:"100",value:i.taxaDevolucaoMes,onChange:e=>d("taxaDevolucaoMes",e.target.value),placeholder:"0,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Dados de 1 dia atr\xe1s"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaTaxaDevolucao",children:"Meta Taxa Devolu\xe7\xe3o (%)"}),t.jsx(h,{id:"metaTaxaDevolucao",type:"number",step:"0.01",min:"0",max:"100",value:i.metaTaxaDevolucao,onChange:e=>d("metaTaxaDevolucao",e.target.value),placeholder:"5,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Meta padr\xe3o: 5%"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-purple-600",children:"Custo Log\xedstico"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"custoLogisticoMes",children:"Custo Log\xedstico M\xeas % (D-2)"}),t.jsx(h,{id:"custoLogisticoMes",type:"number",step:"0.01",min:"0",max:"100",value:i.custoLogisticoMes,onChange:e=>d("custoLogisticoMes",e.target.value),placeholder:"0,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Dados de 2 dias atr\xe1s"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaCustoLogistico",children:"Meta Custo Log\xedstico (%)"}),t.jsx(h,{id:"metaCustoLogistico",type:"number",step:"0.01",min:"0",max:"100",value:i.metaCustoLogistico,onChange:e=>d("metaCustoLogistico",e.target.value),placeholder:"3,50"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Meta padr\xe3o: 3,5%"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold mb-4",children:"Preview dos Indicadores:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-blue-600",children:"OTIF"}),(0,t.jsxs)("p",{className:`text-2xl font-bold ${o(i.otifMes,i.metaOtif)}`,children:[i.otifMes.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Meta: ",i.metaOtif,"%"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-orange-600",children:"Taxa Devolu\xe7\xe3o"}),(0,t.jsxs)("p",{className:`text-2xl font-bold ${o(i.taxaDevolucaoMes,i.metaTaxaDevolucao,!0)}`,children:[i.taxaDevolucaoMes.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Meta: ≤",i.metaTaxaDevolucao,"%"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-purple-600",children:"Custo Log\xedstico"}),(0,t.jsxs)("p",{className:`text-2xl font-bold ${o(i.custoLogisticoMes,i.metaCustoLogistico,!0)}`,children:[i.custoLogisticoMes.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Meta: ≤",i.metaCustoLogistico,"%"]})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Informa\xe7\xf5es Importantes:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"• OTIF e Custo Log\xedstico: dados de 2 dias atr\xe1s (D-2)"}),t.jsx("li",{children:"• Taxa de Devolu\xe7\xe3o: dados de 1 dia atr\xe1s (D-1)"}),t.jsx("li",{children:"• Metas s\xe3o preenchidas apenas uma vez por m\xeas"}),t.jsx("li",{children:"• Cores: Verde (meta atingida), Amarelo (pr\xf3ximo da meta), Vermelho (abaixo da meta)"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(x.z,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),(0,t.jsxs)(x.z,{type:"submit",disabled:l,children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar Dados"]})]})]})})]})}function M({onSubmit:e,onCancel:a,initialData:s,isLoading:l}){let[i,n]=(0,r.useState)({rupturaMesValor:s?.rupturaMesValor||0,rupturaMesPercentual:s?.rupturaMesPercentual||0,metaRupturaValor:s?.metaRupturaValor||0,metaRupturaPercentual:s?.metaRupturaPercentual||0,coberturaEstoqueValor:s?.coberturaEstoqueValor||0,metaCoberturaEstoque:s?.metaCoberturaEstoque||45,mediaDiaria:s?.mediaDiaria||0,mediaDias:s?.mediaDias||0,curvaCValor:s?.curvaCValor||0,curvaCPercentual:s?.curvaCPercentual||0,metaCurvaCValor:s?.metaCurvaCValor||0,metaCurvaCPercentual:s?.metaCurvaCPercentual||0}),d=(e,a)=>{n(s=>({...s,[e]:parseFloat(a)||0}))},o=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),c=(e,a,s=!1)=>{let t=e/a*100;return s?t<=100?"text-green-600":t<=120?"text-yellow-600":"text-red-600":t>=100?"text-green-600":t>=80?"text-yellow-600":"text-red-600"};return(0,t.jsxs)(y.Zb,{className:"w-full max-w-6xl mx-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Formul\xe1rio - Setor Compras"}),t.jsx(x.z,{variant:"ghost",size:"sm",onClick:a,children:t.jsx(f.Z,{className:"h-4 w-4"})})]})}),t.jsx(y.aY,{children:(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(i)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Ruptura M\xeas"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"rupturaMesValor",children:"Ruptura M\xeas (R$)"}),t.jsx(h,{id:"rupturaMesValor",type:"number",step:"0.01",value:i.rupturaMesValor,onChange:e=>d("rupturaMesValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"rupturaMesPercentual",children:"Ruptura M\xeas (%)"}),t.jsx(h,{id:"rupturaMesPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.rupturaMesPercentual,onChange:e=>d("rupturaMesPercentual",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaRupturaValor",children:"Meta Ruptura (R$)"}),t.jsx(h,{id:"metaRupturaValor",type:"number",step:"0.01",value:i.metaRupturaValor,onChange:e=>d("metaRupturaValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaRupturaPercentual",children:"Meta Ruptura (%)"}),t.jsx(h,{id:"metaRupturaPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.metaRupturaPercentual,onChange:e=>d("metaRupturaPercentual",e.target.value),placeholder:"0,00"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600",children:"Cobertura de Estoque"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"coberturaEstoqueValor",children:"Cobertura Estoque (R$)"}),t.jsx(h,{id:"coberturaEstoqueValor",type:"number",step:"0.01",value:i.coberturaEstoqueValor,onChange:e=>d("coberturaEstoqueValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaCoberturaEstoque",children:"Meta Cobertura (dias)"}),t.jsx(h,{id:"metaCoberturaEstoque",type:"number",value:i.metaCoberturaEstoque,onChange:e=>d("metaCoberturaEstoque",e.target.value),placeholder:"45"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Meta padr\xe3o: 45 dias"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"mediaDiaria",children:"M\xe9dia Di\xe1ria"}),t.jsx(h,{id:"mediaDiaria",type:"number",step:"0.01",value:i.mediaDiaria,onChange:e=>d("mediaDiaria",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"mediaDias",children:"M\xe9dia Dias"}),t.jsx(h,{id:"mediaDias",type:"number",value:i.mediaDias,onChange:e=>d("mediaDias",e.target.value),placeholder:"0"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-green-600",children:"Curva C"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"curvaCValor",children:"Curva C (R$)"}),t.jsx(h,{id:"curvaCValor",type:"number",step:"0.01",value:i.curvaCValor,onChange:e=>d("curvaCValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"curvaCPercentual",children:"Curva C (%)"}),t.jsx(h,{id:"curvaCPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.curvaCPercentual,onChange:e=>d("curvaCPercentual",e.target.value),placeholder:"0,00"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaCurvaCValor",children:"Meta Curva C (R$)"}),t.jsx(h,{id:"metaCurvaCValor",type:"number",step:"0.01",value:i.metaCurvaCValor,onChange:e=>d("metaCurvaCValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaCurvaCPercentual",children:"Meta Curva C (%)"}),t.jsx(h,{id:"metaCurvaCPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.metaCurvaCPercentual,onChange:e=>d("metaCurvaCPercentual",e.target.value),placeholder:"0,00"})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold mb-4",children:"Preview dos Indicadores:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-red-600",children:"Ruptura"}),t.jsx("p",{className:`text-lg font-bold ${c(i.rupturaMesValor,i.metaRupturaValor,!0)}`,children:o(i.rupturaMesValor)}),(0,t.jsxs)("p",{className:`text-sm font-semibold ${c(i.rupturaMesPercentual,i.metaRupturaPercentual,!0)}`,children:[i.rupturaMesPercentual.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Meta: ",o(i.metaRupturaValor)," (",i.metaRupturaPercentual,"%)"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-blue-600",children:"Cobertura"}),t.jsx("p",{className:"text-lg font-bold text-blue-600",children:o(i.coberturaEstoqueValor)}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[i.mediaDias," dias"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Meta: ",i.metaCoberturaEstoque," dias"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-green-600",children:"Curva C"}),t.jsx("p",{className:`text-lg font-bold ${c(i.curvaCValor,i.metaCurvaCValor)}`,children:o(i.curvaCValor)}),(0,t.jsxs)("p",{className:`text-sm font-semibold ${c(i.curvaCPercentual,i.metaCurvaCPercentual)}`,children:[i.curvaCPercentual.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Meta: ",o(i.metaCurvaCValor)," (",i.metaCurvaCPercentual,"%)"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-purple-600",children:"M\xe9dia Di\xe1ria"}),t.jsx("p",{className:"text-lg font-bold text-purple-600",children:o(i.mediaDiaria)}),t.jsx("p",{className:"text-sm text-gray-600",children:"Consumo di\xe1rio"})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Informa\xe7\xf5es Importantes:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"• Ruptura: valores e percentuais de produtos em falta"}),t.jsx("li",{children:"• Cobertura de Estoque: valor em R$ e dias de cobertura"}),t.jsx("li",{children:"• Curva C: produtos de baixo giro - valores e percentuais"}),t.jsx("li",{children:"• Metas s\xe3o preenchidas apenas uma vez por m\xeas"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(x.z,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),(0,t.jsxs)(x.z,{type:"submit",disabled:l,children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar Dados"]})]})]})})]})}function P({onSubmit:e,onCancel:a,initialData:s,isLoading:l}){let[i,n]=(0,r.useState)({inadimplencia45dValor:s?.inadimplencia45dValor||0,inadimplencia45dPercentual:s?.inadimplencia45dPercentual||0,metaInadimplenciaValor:s?.metaInadimplenciaValor||0,metaInadimplenciaPercentual:s?.metaInadimplenciaPercentual||0,limitesImplantadosValor:s?.limitesImplantadosValor||0,limitesUtilizadoSemanal:s?.limitesUtilizadoSemanal||0}),d=(e,a)=>{n(s=>({...s,[e]:parseFloat(a)||0}))},o=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),c=(e,a,s=!1)=>{let t=e/a*100;return s?t<=100?"text-green-600":t<=120?"text-yellow-600":"text-red-600":t>=100?"text-green-600":t>=80?"text-yellow-600":"text-red-600"},m=()=>0===i.limitesImplantadosValor?0:i.limitesUtilizadoSemanal/i.limitesImplantadosValor*100;return(0,t.jsxs)(y.Zb,{className:"w-full max-w-4xl mx-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"Formul\xe1rio - Setor Financeiro"}),t.jsx(x.z,{variant:"ghost",size:"sm",onClick:a,children:t.jsx(f.Z,{className:"h-4 w-4"})})]})}),t.jsx(y.aY,{children:(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(i)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-600",children:"Inadimpl\xeancia 45 Dias"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"inadimplencia45dValor",children:"Inadimpl\xeancia 45d - Valor (R$)"}),t.jsx(h,{id:"inadimplencia45dValor",type:"number",step:"0.01",value:i.inadimplencia45dValor,onChange:e=>d("inadimplencia45dValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"inadimplencia45dPercentual",children:"Inadimpl\xeancia 45d - Percentual (%)"}),t.jsx(h,{id:"inadimplencia45dPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.inadimplencia45dPercentual,onChange:e=>d("inadimplencia45dPercentual",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaInadimplenciaValor",children:"Meta Inadimpl\xeancia - Valor (R$)"}),t.jsx(h,{id:"metaInadimplenciaValor",type:"number",step:"0.01",value:i.metaInadimplenciaValor,onChange:e=>d("metaInadimplenciaValor",e.target.value),placeholder:"0,00"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"metaInadimplenciaPercentual",children:"Meta Inadimpl\xeancia - Percentual (%)"}),t.jsx(h,{id:"metaInadimplenciaPercentual",type:"number",step:"0.01",min:"0",max:"100",value:i.metaInadimplenciaPercentual,onChange:e=>d("metaInadimplenciaPercentual",e.target.value),placeholder:"0,00"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-600",children:"Limites de Cr\xe9dito"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"limitesImplantadosValor",children:"Limites Implantados M-1 (R$)"}),t.jsx(h,{id:"limitesImplantadosValor",type:"number",step:"0.01",value:i.limitesImplantadosValor,onChange:e=>d("limitesImplantadosValor",e.target.value),placeholder:"0,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Valor do m\xeas anterior (M-1)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(b,{htmlFor:"limitesUtilizadoSemanal",children:"Utilizado Semanal (R$)"}),t.jsx(h,{id:"limitesUtilizadoSemanal",type:"number",step:"0.01",value:i.limitesUtilizadoSemanal,onChange:e=>d("limitesUtilizadoSemanal",e.target.value),placeholder:"0,00"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Valor utilizado na semana atual"})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[t.jsx(b,{className:"text-sm font-medium text-blue-800",children:"Utiliza\xe7\xe3o dos Limites"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[m().toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-blue-600",children:[o(i.limitesUtilizadoSemanal)," de ",o(i.limitesImplantadosValor)]})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold mb-4",children:"Preview dos Indicadores:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-red-600",children:"Inadimpl\xeancia 45d"}),t.jsx("p",{className:`text-xl font-bold ${c(i.inadimplencia45dValor,i.metaInadimplenciaValor,!0)}`,children:o(i.inadimplencia45dValor)}),(0,t.jsxs)("p",{className:`text-lg font-semibold ${c(i.inadimplencia45dPercentual,i.metaInadimplenciaPercentual,!0)}`,children:[i.inadimplencia45dPercentual.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Meta: ",o(i.metaInadimplenciaValor)," (",i.metaInadimplenciaPercentual,"%)"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-blue-600",children:"Limites Implantados"}),t.jsx("p",{className:"text-xl font-bold text-blue-600",children:o(i.limitesImplantadosValor)}),t.jsx("p",{className:"text-sm text-gray-600",children:"Valor do m\xeas anterior"})]}),(0,t.jsxs)("div",{className:"p-3 bg-white rounded border",children:[t.jsx("h5",{className:"font-medium text-green-600",children:"Utiliza\xe7\xe3o Semanal"}),t.jsx("p",{className:"text-xl font-bold text-green-600",children:o(i.limitesUtilizadoSemanal)}),(0,t.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:[m().toFixed(1),"%"]}),t.jsx("p",{className:"text-sm text-gray-500",children:"dos limites implantados"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-red-50 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"Status Inadimpl\xeancia:"}),t.jsx("div",{className:"text-sm text-red-700",children:i.inadimplencia45dValor<=i.metaInadimplenciaValor?t.jsx("p",{className:"text-green-700",children:"✅ Meta de inadimpl\xeancia atingida"}):t.jsx("p",{children:"⚠️ Inadimpl\xeancia acima da meta estabelecida"})})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Status Utiliza\xe7\xe3o de Limites:"}),t.jsx("div",{className:"text-sm text-blue-700",children:m()>=80?t.jsx("p",{children:"\uD83D\uDCC8 Alta utiliza\xe7\xe3o dos limites de cr\xe9dito"}):m()>=50?t.jsx("p",{children:"\uD83D\uDCCA Utiliza\xe7\xe3o moderada dos limites"}):t.jsx("p",{children:"\uD83D\uDCC9 Baixa utiliza\xe7\xe3o dos limites de cr\xe9dito"})})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Informa\xe7\xf5es Importantes:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"• Inadimpl\xeancia 45d: clientes com atraso superior a 45 dias"}),t.jsx("li",{children:"• Limites Implantados: valor total de limites de cr\xe9dito aprovados no m\xeas anterior"}),t.jsx("li",{children:"• Utilizado Semanal: valor efetivamente utilizado pelos clientes na semana"}),t.jsx("li",{children:"• Metas s\xe3o preenchidas apenas uma vez por m\xeas"}),t.jsx("li",{children:"• Cores: Verde (dentro da meta), Amarelo (pr\xf3ximo do limite), Vermelho (acima da meta)"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[t.jsx(x.z,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),(0,t.jsxs)(x.z,{type:"submit",disabled:l,children:[t.jsx(N,{className:"h-4 w-4 mr-2"}),l?"Salvando...":"Salvar Dados"]})]})]})})]})}var D=s(50340);function I({onDataSubmitted:e}){let{data:a}=(0,u.useSession)(),[s,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),o=a?.user?.department||"COMERCIAL",c=async a=>{d(!0);try{let s=await fetch("/api/sector-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({department:o,data:a,date:new Date().toISOString()})});if(s.ok){let a=await s.json();l(!1),e?.(),alert(`Dados salvos com sucesso! ${a.count} indicadores atualizados.`)}else{let e=await s.json();console.error("Erro ao salvar dados:",e),alert("Erro ao salvar dados: "+e.message)}}catch(e){console.error("Erro ao salvar dados:",e),alert("Erro ao salvar dados. Tente novamente.")}finally{d(!1)}},m=()=>{l(!1)},p=()=>{switch(o){case"COMERCIAL":return"Comercial";case"LOGISTICA":return"Log\xedstica";case"COMPRAS":return"Compras";case"FINANCEIRO":return"Financeiro";default:return"Departamento"}};return s?(()=>{switch(o){case"COMERCIAL":return t.jsx(C,{onSubmit:c,onCancel:m,isLoading:n});case"LOGISTICA":return t.jsx(w,{onSubmit:c,onCancel:m,isLoading:n});case"COMPRAS":return t.jsx(M,{onSubmit:c,onCancel:m,isLoading:n});case"FINANCEIRO":return t.jsx(P,{onSubmit:c,onCancel:m,isLoading:n});default:return t.jsx(y.Zb,{children:t.jsx(y.aY,{className:"p-6",children:t.jsx("p",{className:"text-center text-gray-500",children:"Departamento n\xe3o reconhecido. Entre em contato com o administrador."})})})}})():(0,t.jsxs)(y.Zb,{className:"w-full max-w-2xl mx-auto",children:[t.jsx(y.Ol,{children:(0,t.jsxs)(y.ll,{className:"flex items-center gap-2",children:[t.jsx(D.Z,{className:"h-5 w-5"}),"Painel ",p()]})}),t.jsx(y.aY,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Bem-vindo ao Painel ",p()]}),t.jsx("p",{className:"text-gray-600 mb-4",children:(()=>{switch(o){case"COMERCIAL":return"Preencha os dados de faturamento e positiva\xe7\xe3o do seu setor";case"LOGISTICA":return"Preencha os dados de OTIF, taxa de devolu\xe7\xe3o e custo log\xedstico";case"COMPRAS":return"Preencha os dados de ruptura, cobertura de estoque e curva C";case"FINANCEIRO":return"Preencha os dados de inadimpl\xeancia e limites de cr\xe9dito";default:return"Preencha os dados do seu departamento"}})()}),(0,t.jsxs)(x.z,{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700",size:"lg",children:[t.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"Preencher Dados do Setor"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded border-l-4 border-green-400",children:[t.jsx("h4",{className:"font-semibold text-green-800",children:"Dados Atualizados"}),t.jsx("p",{className:"text-green-700",children:"Os dados preenchidos alimentar\xe3o automaticamente os indicadores do dashboard"})]}),(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded border-l-4 border-yellow-400",children:[t.jsx("h4",{className:"font-semibold text-yellow-800",children:"Metas Mensais"}),t.jsx("p",{className:"text-yellow-700",children:"As metas precisam ser definidas apenas uma vez por m\xeas"})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2",children:["Campos do Setor ",p(),":"]}),(0,t.jsxs)("div",{className:"text-left text-sm text-gray-600",children:["COMERCIAL"===o&&(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:"• Faturamento: dia, m\xeas acumulado e metas"}),t.jsx("li",{children:"• Positiva\xe7\xe3o: dia, m\xeas acumulado e metas"})]}),"LOGISTICA"===o&&(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:"• OTIF m\xeas % (D-2) - Meta: 95%"}),t.jsx("li",{children:"• Taxa de devolu\xe7\xe3o m\xeas % (D-1) - Meta: 5%"}),t.jsx("li",{children:"• Custo log\xedstico m\xeas % (D-2) - Meta: 3,5%"})]}),"COMPRAS"===o&&(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:"• Ruptura m\xeas: R$ e % com metas"}),t.jsx("li",{children:"• Cobertura de estoque: R$ - Meta: 45 dias"}),t.jsx("li",{children:"• Curva C: R$ e % com metas"})]}),"FINANCEIRO"===o&&(0,t.jsxs)("ul",{className:"space-y-1",children:[t.jsx("li",{children:"• Inadimpl\xeancia 45d: valor R$ e % com metas"}),t.jsx("li",{children:"• Limites implantados: valor M-1 R$"}),t.jsx("li",{children:"• Utilizado semanal"})]})]})]})]})})]})}let R={COMERCIAL:[{name:"vendas_mes",label:"Vendas do M\xeas",unit:"R$",type:"currency"},{name:"leads_gerados",label:"Leads Gerados",unit:"unidades",type:"number"},{name:"conversao_leads",label:"Taxa de Convers\xe3o",unit:"%",type:"percentage"},{name:"ticket_medio",label:"Ticket M\xe9dio",unit:"R$",type:"currency"},{name:"clientes_novos",label:"Clientes Novos",unit:"unidades",type:"number"}],LOGISTICA:[{name:"entregas_prazo",label:"Entregas no Prazo",unit:"%",type:"percentage"},{name:"custo_frete",label:"Custo de Frete",unit:"R$",type:"currency"},{name:"tempo_entrega",label:"Tempo M\xe9dio de Entrega",unit:"dias",type:"number"},{name:"avarias",label:"Taxa de Avarias",unit:"%",type:"percentage"},{name:"estoque_giro",label:"Giro de Estoque",unit:"vezes",type:"number"}],COMPRAS:[{name:"economia_negociacao",label:"Economia em Negocia\xe7\xe3o",unit:"R$",type:"currency"},{name:"prazo_pagamento",label:"Prazo M\xe9dio de Pagamento",unit:"dias",type:"number"},{name:"fornecedores_avaliados",label:"Fornecedores Avaliados",unit:"unidades",type:"number"},{name:"qualidade_produtos",label:"Qualidade dos Produtos",unit:"%",type:"percentage"},{name:"tempo_processo",label:"Tempo de Processo",unit:"dias",type:"number"}],FINANCEIRO:[{name:"fluxo_caixa",label:"Fluxo de Caixa",unit:"R$",type:"currency"},{name:"inadimplencia",label:"Taxa de Inadimpl\xeancia",unit:"%",type:"percentage"},{name:"margem_lucro",label:"Margem de Lucro",unit:"%",type:"percentage"},{name:"contas_receber",label:"Contas a Receber",unit:"R$",type:"currency"},{name:"despesas_operacionais",label:"Despesas Operacionais",unit:"R$",type:"currency"}],TI:[{name:"uptime_sistemas",label:"Uptime dos Sistemas",unit:"%",type:"percentage"},{name:"tickets_resolvidos",label:"Tickets Resolvidos",unit:"unidades",type:"number"},{name:"tempo_resposta",label:"Tempo M\xe9dio de Resposta",unit:"horas",type:"number"},{name:"backup_sucesso",label:"Taxa de Sucesso de Backup",unit:"%",type:"percentage"},{name:"projetos_entregues",label:"Projetos Entregues no Prazo",unit:"%",type:"percentage"}],DIRETORIA:[{name:"receita_total",label:"Receita Total",unit:"R$",type:"currency"},{name:"lucro_liquido",label:"Lucro L\xedquido",unit:"R$",type:"currency"},{name:"crescimento_mensal",label:"Crescimento Mensal",unit:"%",type:"percentage"},{name:"satisfacao_cliente",label:"Satisfa\xe7\xe3o do Cliente",unit:"%",type:"percentage"},{name:"eficiencia_operacional",label:"Efici\xeancia Operacional",unit:"%",type:"percentage"}]};function F({department:e,userId:a,indicators:s,goals:u}){let[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),b=R[e]||[],y=async s=>{v(!0);try{(await fetch("/api/indicators",{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,userId:a,department:e,id:h?.id})})).ok?(o.default.success(h?"Indicador atualizado!":"Indicador criado!"),p(!1),g(null),window.location.reload()):o.default.error("Erro ao salvar indicador")}catch(e){o.default.error("Erro ao salvar indicador")}finally{v(!1)}},f=async e=>{if(confirm("Tem certeza que deseja excluir este indicador?"))try{(await fetch(`/api/indicators/${e}`,{method:"DELETE"})).ok?(o.default.success("Indicador exclu\xeddo!"),window.location.reload()):o.default.error("Erro ao excluir indicador")}catch(e){o.default.error("Erro ao excluir indicador")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx(I,{onDataSubmitted:()=>{o.default.success("Dados do setor atualizados!"),window.location.reload()}}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("button",{onClick:()=>p(!0),className:"btn-primary flex items-center space-x-2",children:[t.jsx(i.Z,{className:"w-4 h-4"}),t.jsx("span",{children:"Novo Indicador"})]})}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[s.length," indicadores cadastrados"]})]}),x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"Editar Indicador":"Novo Indicador"}),t.jsx(c,{fields:b,onSubmit:y,onCancel:()=>{p(!1),g(null)},initialData:h,isLoading:j})]})}),u.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(n.Z,{className:"w-5 h-5 text-primary-600"}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Metas do Departamento"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:["Atual: ",e.current.toLocaleString("pt-BR")]}),(0,t.jsxs)("span",{children:["Meta: ",e.target.toLocaleString("pt-BR")]})]}),t.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(e.current/e.target*100,100)}%`}})})]})]},e.id))})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e,a)=>t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:t.jsx(m.o,{indicator:e,onEdit:()=>{g(e),p(!0)},onDelete:()=>f(e.id)})},e.id))}),0===s.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum indicador cadastrado"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Comece adicionando indicadores para acompanhar o desempenho do seu departamento."}),t.jsx("button",{onClick:()=>p(!0),className:"btn-primary",children:"Criar Primeiro Indicador"})]})]})}},57920:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GeneralDashboard:()=>h});var t=s(95344),r=s(3729),l=s(41067),i=s(48411),n=s(46064),d=s(88534),o=s(89895),c=s(77402),m=s(50340),u=s(27333);let x={COMERCIAL:"bg-blue-500",LOGISTICA:"bg-green-500",COMPRAS:"bg-purple-500",FINANCEIRO:"bg-yellow-500",TI:"bg-red-500",DIRETORIA:"bg-gray-500"},p={COMERCIAL:"Comercial",LOGISTICA:"Log\xedstica",COMPRAS:"Compras",FINANCEIRO:"Financeiro",TI:"TI",DIRETORIA:"Diretoria"};function h({userId:e}){let[a,s]=(0,r.useState)(null),[h,g]=(0,r.useState)([]),[j,v]=(0,r.useState)("ALL"),[b,y]=(0,r.useState)(!0),[f,N]=(0,r.useState)("30");(0,r.useEffect)(()=>{C()},[f]);let C=async()=>{y(!0);try{let e=await fetch(`/api/indicators/all?days=${f}`),a=await e.json(),t=await fetch("/api/goals/all"),r=await t.json();g(a);let l=w(a,r);s(l)}catch(e){console.error("Erro ao buscar dados consolidados:",e)}finally{y(!1)}},w=(e,a)=>{let s=Object.entries(e.reduce((e,a)=>(e[a.department]||(e[a.department]=[]),e[a.department].push(a),e),{})).map(([e,a])=>{let s=a.reduce((e,a)=>e+(a.target>0?a.value/a.target*100:0),0)/a.length;return{department:e,totalIndicators:a.length,averagePerformance:s,trend:s>80?"up":s>60?"stable":"down",topIndicators:a.slice(0,3)}}),t=e.filter(e=>e.name.includes("receita")||e.name.includes("vendas")||e.name.includes("faturamento")).reduce((e,a)=>e+a.value,0),r=e.filter(e=>e.name.includes("lucro")||e.name.includes("margem")).reduce((e,a)=>e+a.value,0),l=e.filter(e=>e.name.includes("eficiencia")||e.name.includes("produtividade")),i=l.length>0?l.reduce((e,a)=>e+a.value,0)/l.length:0,n=e.filter(e=>e.name.includes("satisfacao")||e.name.includes("cliente"));return{totalRevenue:t,totalProfit:r,overallEfficiency:i,customerSatisfaction:n.length>0?n.reduce((e,a)=>e+a.value,0)/n.length:0,departmentPerformance:s}},M="ALL"===j?h:h.filter(e=>e.department===j);return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Geral"}),t.jsx("p",{className:"text-gray-600",children:"Vis\xe3o consolidada de todos os departamentos"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[t.jsx("option",{value:"7",children:"\xdaltimos 7 dias"}),t.jsx("option",{value:"30",children:"\xdaltimos 30 dias"}),t.jsx("option",{value:"90",children:"\xdaltimos 90 dias"})]}),(0,t.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[t.jsx("option",{value:"ALL",children:"Todos os Departamentos"}),Object.entries(p).map(([e,a])=>t.jsx("option",{value:e,children:a},e))]})]})]}),a&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Receita Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalRevenue.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),t.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:t.jsx(i.Z,{className:"w-6 h-6 text-blue-600"})})]})}),t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.totalProfit.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),t.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:t.jsx(n.Z,{className:"w-6 h-6 text-green-600"})})]})}),t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Efici\xeancia Geral"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[a.overallEfficiency.toFixed(1),"%"]})]}),t.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:t.jsx(d.Z,{className:"w-6 h-6 text-purple-600"})})]})}),t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Satisfa\xe7\xe3o Cliente"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[a.customerSatisfaction.toFixed(1),"%"]})]}),t.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:t.jsx(o.Z,{className:"w-6 h-6 text-yellow-600"})})]})})]}),a&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance por Departamento"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.departmentPerformance.map((e,a)=>(0,t.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${x[e.department]}`}),t.jsx("h3",{className:"font-medium text-gray-900",children:p[e.department]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:["up"===e.trend&&t.jsx(n.Z,{className:"w-4 h-4 text-green-500"}),"down"===e.trend&&t.jsx(c.Z,{className:"w-4 h-4 text-red-500"}),"stable"===e.trend&&t.jsx(d.Z,{className:"w-4 h-4 text-yellow-500"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Performance:"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.averagePerformance.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Indicadores:"}),t.jsx("span",{className:"font-medium",children:e.totalIndicators})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${e.averagePerformance>80?"bg-green-500":e.averagePerformance>60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(e.averagePerformance,100)}%`}})})]})]},e.department))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Indicadores ","ALL"===j?"Gerais":`- ${p[j]}`]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[M.length," indicadores"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map((e,a)=>t.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},children:t.jsx(u.o,{indicator:e,showDepartment:"ALL"===j})},e.id))}),0===M.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(m.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum indicador encontrado"}),t.jsx("p",{className:"text-gray-500",children:"ALL"===j?"N\xe3o h\xe1 indicadores cadastrados no sistema.":`N\xe3o h\xe1 indicadores para o departamento ${p[j]}.`})]})]})]})}},27333:(e,a,s)=>{"use strict";s.d(a,{o:()=>x});var t=s(95344),r=s(41067),l=s(46064),i=s(17910),n=s(77402),d=s(69224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),c=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var m=s(6687),u=s(95446);function x({indicator:e,onEdit:a,onDelete:s}){let d=e.value/e.target*100,x=e.value>=e.target,p=e.value>=.8*e.target,h=()=>x?"success":p?"warning":"danger";return(0,t.jsxs)(r.E.div,{whileHover:{y:-2},className:`metric-card ${h()}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["Atualizado ",(0,m.Z)(new Date(e.updatedAt),{addSuffix:!0,locale:u.Z})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx("button",{onClick:a,className:"p-1 rounded hover:bg-gray-100 text-gray-500 hover:text-gray-700",children:t.jsx(o,{className:"w-4 h-4"})}),t.jsx("button",{onClick:s,className:"p-1 rounded hover:bg-gray-100 text-gray-500 hover:text-red-600",children:t.jsx(c,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[x?t.jsx(l.Z,{className:"w-4 h-4 text-green-500"}):p?t.jsx(i.Z,{className:"w-4 h-4 text-yellow-500"}):t.jsx(n.Z,{className:"w-4 h-4 text-red-500"}),t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:e.value.toLocaleString("pt-BR")}),e.unit&&t.jsx("span",{className:"text-sm text-gray-500",children:e.unit})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Meta"}),(0,t.jsxs)("p",{className:"text-lg font-semibold text-gray-700",children:[e.target.toLocaleString("pt-BR"),e.unit&&t.jsx("span",{className:"text-sm ml-1",children:e.unit})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Progresso"}),(0,t.jsxs)("span",{className:`text-sm font-medium ${x?"text-green-600":p?"text-yellow-600":"text-red-600"}`,children:[d.toFixed(1),"%"]})]}),t.jsx("div",{className:"progress-bar",children:t.jsx("div",{className:`progress-fill ${h()}`,style:{width:`${Math.min(d,100)}%`}})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-500",children:x?"Meta atingida!":p?"Pr\xf3ximo da meta":"Abaixo da meta"}),(0,t.jsxs)("span",{className:`font-medium ${d>=100?"text-green-600":d>=80?"text-yellow-600":"text-red-600"}`,children:[d>=100?"+":"",(d-100).toFixed(1),"%"]})]})]})]})}},16212:(e,a,s)=>{"use strict";s.d(a,{z:()=>o});var t=s(95344),r=s(3729),l=s(32751),i=s(49247),n=s(91626);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:a,size:s,asChild:r=!1,...i},o)=>{let c=r?l.g7:"button";return t.jsx(c,{className:(0,n.cn)(d({variant:a,size:s,className:e})),ref:o,...i})});o.displayName="Button"},61351:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>n,SZ:()=>o,Zb:()=>i,aY:()=>c,ll:()=>d});var t=s(95344),r=s(3729),l=s(91626);let i=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card";let n=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...a}));n.displayName="CardHeader";let d=r.forwardRef(({className:e,...a},s)=>t.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle";let o=r.forwardRef(({className:e,...a},s)=>t.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...a}));c.displayName="CardContent",r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter"},91626:(e,a,s)=>{"use strict";s.d(a,{cn:()=>l});var t=s(56815),r=s(79377);function l(...e){return(0,r.m6)((0,t.W)(e))}},88534:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(69224).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},51838:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},14513:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(69224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2744:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(25036),r=s(81355),l=s(3205),i=s(3214),n=s(86843);let d=(0,n.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\DepartmentPanel.tsx`),{__esModule:o,$$typeof:c}=d;d.default;let m=(0,n.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\DepartmentPanel.tsx#DepartmentPanel`),u=(0,n.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\GeneralDashboard.tsx`),{__esModule:x,$$typeof:p}=u;u.default;let h=(0,n.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\GeneralDashboard.tsx#GeneralDashboard`);var g=s(44551);async function j(e,a){return{indicators:await i._.indicator.findMany({where:{userId:e,department:a},orderBy:{createdAt:"desc"}}),goals:await i._.goal.findMany({where:{department:a,isActive:!0},orderBy:{createdAt:"desc"}})}}async function v(){let e=await (0,r.getServerSession)(l.L);if(e||(0,g.redirect)("/auth/signin"),"DIRETORIA"===e.user.department)return t.jsx(h,{userId:e.user.id});let{indicators:a,goals:s}=await j(e.user.id,e.user.department);return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Meu Painel"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Departamento: ",e.user.department]})]})}),t.jsx(m,{department:e.user.department,userId:e.user.id,indicators:a,goals:s})]})}}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[638,393,650,346,190,67,0,104,229,317],()=>s(48845));module.exports=t})();