(()=>{var e={};e.id=455,e.ids=[455],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},33666:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>o,routeModule:()=>x,tree:()=>d});var r=t(50482),a=t(69108),i=t(62563),n=t.n(i),l=t(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,84516)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,99233)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,78062)),"C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\suporteEsplendor50\\CascadeProjects\\esplendor_indicadores\\app\\dashboard\\settings\\page.tsx"],p="/dashboard/settings/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/settings/page",pathname:"/dashboard/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},58374:(e,s,t)=>{Promise.resolve().then(t.bind(t,31937))},31937:(e,s,t)=>{"use strict";t.r(s),t.d(s,{NotificationSettings:()=>h});var r=t(95344),a=t(3729),i=t(41067),n=t(71206),l=t(51838),c=t(14513),d=t(69224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,d.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);var p=t(25545);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var x=t(44669);function h({initialConfig:e}){let[s,t]=(0,a.useState)({emailEnabled:e?.emailEnabled||!1,whatsappEnabled:e?.whatsappEnabled||!1,recipients:e?.recipients||[],whatsappNumbers:e?.whatsappNumbers||[],sendTime:e?.sendTime||"09:00"}),[d,h]=(0,a.useState)(!1),[m,y]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),b=async()=>{h(!0);try{(await fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?x.default.success("Configura\xe7\xf5es salvas com sucesso!"):x.default.error("Erro ao salvar configura\xe7\xf5es")}catch(e){x.default.error("Erro ao salvar configura\xe7\xf5es")}finally{h(!1)}},j=async()=>{h(!0);try{(await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"send_test_report"})})).ok?x.default.success("Relat\xf3rio de teste enviado!"):x.default.error("Erro ao enviar relat\xf3rio de teste")}catch(e){x.default.error("Erro ao enviar relat\xf3rio de teste")}finally{h(!1)}},v=()=>{m&&!s.recipients.includes(m)&&(t({...s,recipients:[...s.recipients,m]}),y(""))},N=e=>{t({...s,recipients:s.recipients.filter(s=>s!==e)})},k=()=>{f&&!s.whatsappNumbers.includes(f)&&(t({...s,whatsappNumbers:[...s.whatsappNumbers,f]}),g(""))},w=e=>{t({...s,whatsappNumbers:s.whatsappNumbers.filter(s=>s!==e)})};return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Configura\xe7\xf5es de Notifica\xe7\xe3o"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(n.Z,{className:"w-5 h-5 text-blue-500"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Notifica\xe7\xf5es por Email"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enviar relat\xf3rios di\xe1rios por email"})]})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.emailEnabled,onChange:e=>t({...s,emailEnabled:e.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.emailEnabled&&(0,r.jsxs)("div",{className:"ml-8 space-y-3",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"email",value:m,onChange:e=>y(e.target.value),placeholder:"Adicionar email",className:"input-field flex-1",onKeyPress:e=>"Enter"===e.key&&v()}),r.jsx("button",{onClick:v,className:"btn-primary px-3",children:r.jsx(l.Z,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-2",children:s.recipients.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{className:"text-sm",children:e}),r.jsx("button",{onClick:()=>N(e),className:"text-red-500 hover:text-red-700",children:r.jsx(c.Z,{className:"w-4 h-4"})})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(o,{className:"w-5 h-5 text-green-500"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Notifica\xe7\xf5es por WhatsApp"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enviar relat\xf3rios di\xe1rios por WhatsApp"})]})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.whatsappEnabled,onChange:e=>t({...s,whatsappEnabled:e.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),s.whatsappEnabled&&(0,r.jsxs)("div",{className:"ml-8 space-y-3",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"tel",value:f,onChange:e=>g(e.target.value),placeholder:"Adicionar n\xfamero (+55...)",className:"input-field flex-1",onKeyPress:e=>"Enter"===e.key&&k()}),r.jsx("button",{onClick:k,className:"btn-primary px-3",children:r.jsx(l.Z,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-2",children:s.whatsappNumbers.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{className:"text-sm",children:e}),r.jsx("button",{onClick:()=>w(e),className:"text-red-500 hover:text-red-700",children:r.jsx(c.Z,{className:"w-4 h-4"})})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(p.Z,{className:"w-5 h-5 text-purple-500"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Hor\xe1rio de Envio"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Hor\xe1rio para envio dos relat\xf3rios di\xe1rios"})]})]}),r.jsx("div",{className:"ml-8",children:r.jsx("input",{type:"time",value:s.sendTime,onChange:e=>t({...s,sendTime:e.target.value}),className:"input-field w-32"})})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{onClick:b,disabled:d,className:"btn-primary disabled:opacity-50",children:d?"Salvando...":"Salvar Configura\xe7\xf5es"}),(0,r.jsxs)("button",{onClick:j,disabled:d,className:"btn-secondary flex items-center space-x-2",children:[r.jsx(u,{className:"w-4 h-4"}),r.jsx("span",{children:"Enviar Teste"})]})]})]})]})}},50340:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},25545:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},48411:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},71206:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},51838:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},12401:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},46064:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},16278:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},89895:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},14513:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(69224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},84516:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(25036),a=t(81355),i=t(3205),n=t(3214),l=t(44551),c=t(86843);let d=(0,c.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\NotificationSettings.tsx`),{__esModule:o,$$typeof:p}=d;d.default;let u=(0,c.createProxy)(String.raw`C:\Users\suporteEsplendor50\CascadeProjects\esplendor_indicadores\components\NotificationSettings.tsx#NotificationSettings`);async function x(){return await n._.notificationConfig.findFirst({where:{isActive:!0}})}async function h(){let e=await (0,a.getServerSession)(i.L);e||(0,l.redirect)("/auth/signin");let s=await x();return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configura\xe7\xf5es"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gerencie as configura\xe7\xf5es do sistema"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Perfil do Usu\xe1rio"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),r.jsx("input",{type:"text",value:e.user.name||"",disabled:!0,className:"input-field bg-gray-50"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:e.user.email||"",disabled:!0,className:"input-field bg-gray-50"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),r.jsx("input",{type:"text",value:e.user.department,disabled:!0,className:"input-field bg-gray-50"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o"}),r.jsx("input",{type:"text",value:e.user.role,disabled:!0,className:"input-field bg-gray-50"})]})]})]}),"ADMIN"===e.user.role&&r.jsx(u,{initialConfig:s})]})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,393,650,346,190,67,104,317],()=>t(33666));module.exports=r})();